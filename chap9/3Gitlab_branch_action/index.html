
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Jacob's Gitlab Tutorial Book">
      
      
        <meta name="author" content="Jacob Xi">
      
      
        <link rel="canonical" href="https://chao-xi.github.io/jxgitlabbook/chap9/3Gitlab_branch_action/">
      
      
        <link rel="prev" href="../2gitlab_workflow/">
      
      
        <link rel="next" href="../4gitlab_project/">
      
      
      <link rel="icon" href="../../images/logo.jpeg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>L3 Gitlab branch Settup Action - Jacob GitLab Book</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#l3-gitlab-branch-setup-action" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Jacob GitLab Book" class="md-header__button md-logo" aria-label="Jacob GitLab Book" data-md-component="logo">
      
  <img src="../../images/logo.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jacob GitLab Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              L3 Gitlab branch Settup Action
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chao-Xi/jxgitlabbook.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jxgitlabbook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Jacob GitLab Book" class="md-nav__button md-logo" aria-label="Jacob GitLab Book" data-md-component="logo">
      
  <img src="../../images/logo.jpeg" alt="logo">

    </a>
    Jacob GitLab Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chao-Xi/jxgitlabbook.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    jxgitlabbook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GitLab Fundamentals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            GitLab Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap0/1proj/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project and Repositoires
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap0/4issues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitlab Issues and Timelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gitlab 简介
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Gitlab 简介
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/1gitlab_cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 Gitlab 基本介绍（CI/CD)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/2gitlab_branch_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Gitlab branch Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/3gitlab_install_quick/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 安装配置Gitlab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/4gitlab_install_k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 在Kubernetes上安装Gitlab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gitlab Runner配置&安装
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Gitlab Runner配置&安装
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/1gitruner_intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 GitLab Runner 简介
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/2gitrunner_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 GitLab Runner安装注册配置管理
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pipeline 核心语法
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Pipeline 核心语法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/1gitlab_pip1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitLabCI系列之流水线语法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/2gitlab_summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Gitlab CI 流水线构建优化 + Runner构建优化（持久化）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/3gitlab_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 配置复杂的 Gitlab CI/CD Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gitlab工具链集成
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Gitlab工具链集成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/1git_template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 模板库设计Maven+NPM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/2git_sonar_pr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Gitlab 工具链集成-代码质量平台集成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/3gitlab_artifact_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 工具链集成-制品库集成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/4gitlab_jemeter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 Gitlab 自动化测试集成
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/5gitlba_mon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 GitLabCI/CD Prom构建数据采集与监控
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gitlab + Kubernetes集成
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Gitlab + Kubernetes集成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/1gitlab-runner-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 基于K8S安装部署Runner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/2gitlab_k8s/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 Kubernetes 容器流水线
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/3gitlab_notification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 Kubernetes 流水线构建消息通知
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/4gitlab_distri_storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 Gitlab + minio 配置使用分布式缓存
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gitlab流水线最佳实践
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Gitlab流水线最佳实践
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/1pip_init/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 流水线设计及提交
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/2pip_design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 提交流水线设计
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/3pip_run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 流水线运行
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/4pip_secret/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 如何将Secrets扫描加入到GitLab Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    项目交付流水线
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            项目交付流水线
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7/1deploy_pip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 项目交付流水线优化后模板库配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7/2deploy_projs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 项目流水线(JAVA+NPM+安卓)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    gitlab Certified CICD
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            gitlab Certified CICD
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap8/1cer_prep1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitLab Certified CI/CD Specialist Training
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap8/2pip_prep1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Anatomy of a Pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap8/3Gitlab_pip/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitlab Pipeline 复习
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap8/4Final_test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gitlab 认证考题
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" checked>
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    gitlab Project Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            gitlab Project Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1Gitlab_branch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L1 Gitlab branch Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2gitlab_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L2 Gitflow Workflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    L3 Gitlab branch Settup Action
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    L3 Gitlab branch Settup Action
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-default-branch" class="md-nav__link">
    <span class="md-ellipsis">
      1 Default branch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-protected-branches" class="md-nav__link">
    <span class="md-ellipsis">
      2 Protected branches
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Protected branches">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#who-can-modify-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Who can modify a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-multiple-protected-branches-by-using-a-wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      Configure multiple protected branches by using a wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisite:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Create a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#require-everyone-to-submit-merge-requests-for-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Require everyone to submit merge requests for a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-everyone-to-push-directly-to-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Allow everyone to push directly to a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#require-code-owner-approval-on-a-protected-branch-premium" class="md-nav__link">
    <span class="md-ellipsis">
      Require Code Owner approval on a protected branch （PREMIUM）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-protected-tags" class="md-nav__link">
    <span class="md-ellipsis">
      3 Protected tags
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Protected tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-protected-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring protected tags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wildcard-protected-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Wildcard protected tags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#push-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Push rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Push rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-global-push-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Enable global push rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-global-push-rules-per-project" class="md-nav__link">
    <span class="md-ellipsis">
      Override global push rules per project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-users" class="md-nav__link">
    <span class="md-ellipsis">
      Verify users
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-commit-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Validate commit messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-branch-names" class="md-nav__link">
    <span class="md-ellipsis">
      Validate branch names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prevent-unintended-consequences" class="md-nav__link">
    <span class="md-ellipsis">
      Prevent unintended consequences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-files" class="md-nav__link">
    <span class="md-ellipsis">
      Validate files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4gitlab_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L4 Agile Planning with GitLab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4gitlab_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L4 Agile Planning with GitLab
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ArgoCD Project
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            ArgoCD Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/0gitops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0 GitOps 常用工具盘点
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/1argo2023_gitops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 使用 Argo CD 进行 GitOps 流水线改造- 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/2Argo_Rollouts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 使用 Argo Rollouts 实现应用渐进式发布
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/3argo_dr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 DevOps中的Argo CD — 灾难恢复
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/4argo_rollouts_ab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 A/B测试: 如何使用Argo Rollouts 进行渐进式交付
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/6gitops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 GitOps 简介
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/7k8s_yaml_cicd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 K8S YAML 资源清单管理方案
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../argo1/8cd_image_updater/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 ArgoCD Image Updater
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Github Action
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Github Action
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap10/1action_docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基于GitHubActions同步Docker镜像实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap10/2action_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Action - CI/CD Pipeline with Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap10/3action_events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Actions basic learning
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-default-branch" class="md-nav__link">
    <span class="md-ellipsis">
      1 Default branch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-protected-branches" class="md-nav__link">
    <span class="md-ellipsis">
      2 Protected branches
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Protected branches">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#who-can-modify-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Who can modify a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-multiple-protected-branches-by-using-a-wildcard" class="md-nav__link">
    <span class="md-ellipsis">
      Configure multiple protected branches by using a wildcard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisite" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisite:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Create a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#require-everyone-to-submit-merge-requests-for-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Require everyone to submit merge requests for a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow-everyone-to-push-directly-to-a-protected-branch" class="md-nav__link">
    <span class="md-ellipsis">
      Allow everyone to push directly to a protected branch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#require-code-owner-approval-on-a-protected-branch-premium" class="md-nav__link">
    <span class="md-ellipsis">
      Require Code Owner approval on a protected branch （PREMIUM）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-protected-tags" class="md-nav__link">
    <span class="md-ellipsis">
      3 Protected tags
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Protected tags">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-protected-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring protected tags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wildcard-protected-tags" class="md-nav__link">
    <span class="md-ellipsis">
      Wildcard protected tags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#push-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Push rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Push rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-global-push-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Enable global push rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-global-push-rules-per-project" class="md-nav__link">
    <span class="md-ellipsis">
      Override global push rules per project
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-users" class="md-nav__link">
    <span class="md-ellipsis">
      Verify users
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-commit-messages" class="md-nav__link">
    <span class="md-ellipsis">
      Validate commit messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-branch-names" class="md-nav__link">
    <span class="md-ellipsis">
      Validate branch names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prevent-unintended-consequences" class="md-nav__link">
    <span class="md-ellipsis">
      Prevent unintended consequences
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validate-files" class="md-nav__link">
    <span class="md-ellipsis">
      Validate files
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="l3-gitlab-branch-setup-action"><strong>L3 Gitlab branch Setup Action</strong></h1>
<h2 id="1-default-branch"><strong>1 Default branch</strong></h2>
<p>A default branch has special configuration options not shared by other branches:</p>
<ul>
<li><strong>It cannot be deleted</strong>.</li>
<li><strong>It’s initially protected against forced pushes</strong>.</li>
<li>When a merge request uses an <strong>issue closing pattern</strong> to close an issue, the work is merged into this branch.</li>
</ul>
<p><strong>Protect initial default branches</strong></p>
<ul>
<li><strong>Not protected</strong> - Both developers and maintainers can push new commits and force push.</li>
<li><strong>Protected against pushes</strong> - Developers cannot push new commits, but are allowed to accept merge requests to the branch. Maintainers can push to the branch.</li>
<li><strong>Partially protected</strong> - Both developers and maintainers can push new commits, but cannot force push.</li>
<li><strong>Fully protected</strong> - <strong>Developers cannot push new commits, but maintainers can</strong>. No one can force push.</li>
</ul>
<h2 id="2-protected-branches"><strong>2 Protected branches</strong></h2>
<h3 id="who-can-modify-a-protected-branch"><strong>Who can modify a protected branch</strong></h3>
<table>
<thead>
<tr>
<th>Action</th>
<th>Who can do it</th>
</tr>
</thead>
<tbody>
<tr>
<td>Protect a branch</td>
<td>At least the Maintainer role.</td>
</tr>
<tr>
<td>Push to the branch</td>
<td>GitLab administrators and anyone with Allowed permission. (1)</td>
</tr>
<tr>
<td>Force push to the branch</td>
<td>No one.</td>
</tr>
<tr>
<td>Delete the branch</td>
<td>No one. (2)</td>
</tr>
</tbody>
</table>
<h3 id="configure-multiple-protected-branches-by-using-a-wildcard"><strong>Configure multiple protected branches by using a wildcard</strong></h3>
<p>If both a specific rule and a wildcard rule apply to the same branch, the most permissive rule controls how the branch behaves.</p>
<p>For merge controls to work properly, set <strong>Allowed to push</strong> to a broader set of users than <strong>Allowed to merge</strong>.</p>
<h3 id="prerequisite">Prerequisite:</h3>
<p><strong>You must have at least the Maintainer role.</strong></p>
<p><strong>To protect multiple branches at the same time:</strong></p>
<table>
<thead>
<tr>
<th>Wildcard protected branch</th>
<th>Matching branches</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*-stable</code></td>
<td><code>production-stable, staging-stable</code></td>
</tr>
<tr>
<td><code>production/*</code></td>
<td><code>production/app-server</code>, <code>production/load-balancer</code></td>
</tr>
<tr>
<td><code>*gitlab*</code></td>
<td><code>gitlab</code>, <code>gitlab/staging</code>, <code>master/gitlab/production</code></td>
</tr>
</tbody>
</table>
<h3 id="create-a-protected-branch"><strong>Create a protected branch</strong></h3>
<p>Users with <strong>at least the Developer</strong> role can create a protected branch.</p>
<ul>
<li>Allowed to <strong>push</strong> is set to <strong>No one</strong></li>
<li>Allowed to <strong>merge</strong> is set to <strong>Developers</strong>.</li>
</ul>
<p><strong>You can create a protected branch by using the UI or API only.</strong></p>
<h3 id="require-everyone-to-submit-merge-requests-for-a-protected-branch"><strong>Require everyone to submit merge requests for a protected branch</strong></h3>
<p><strong>You can force everyone to submit a merge request</strong>, rather than allowing them to check in directly to a protected branch.</p>
<ul>
<li>Settings &gt; Repository</li>
<li>Expand <strong>Protected branches</strong>.</li>
<li>From the Allowed to <strong>merge list</strong>, select <strong>Developers + Maintainers</strong>.</li>
<li>From the <strong>Allowed to push list</strong>, select <strong>No one</strong>.</li>
</ul>
<h3 id="allow-everyone-to-push-directly-to-a-protected-branch"><strong>Allow everyone to push directly to a protected branch</strong></h3>
<ul>
<li>Settings &gt; Repository.</li>
<li>Expand <strong>Protected branches</strong>.</li>
<li>From the <strong>Allowed to push</strong> list, select <strong>Developers + Maintainers</strong>.</li>
</ul>
<h3 id="require-code-owner-approval-on-a-protected-branch-premium"><strong>Require Code Owner approval on a protected branch （PREMIUM）</strong></h3>
<ul>
<li>Expand Protected branches.</li>
<li>From the <strong>Allowed to push</strong> and <strong>Allowed to merge lists</strong>, select the settings you want.</li>
<li>To allow all users with push access to force push, turn on the <strong>Allowed to force push toggle</strong>.</li>
<li>To reject code pushes that change files listed in the <strong>CODEOWNERS</strong> file, turn on the Require <strong>approval from code owners</strong> toggle</li>
</ul>
<h2 id="3-protected-tags"><strong>3 Protected tags</strong></h2>
<p>Protected tags:</p>
<ul>
<li>Allow control over who has permission to create tags.</li>
<li>Prevent accidental update or deletion once created.</li>
</ul>
<p>Each rule allows you to match either:</p>
<h3 id="configuring-protected-tags"><strong>Configuring protected tags</strong></h3>
<ul>
<li>Settings &gt; Repository.</li>
<li>From the <strong>Tag</strong> dropdown list, select the tag you want to protect or type and select <strong>Create wildcard</strong>. In the screenshot below, we chose to protect all tags matching <code>v*</code></li>
</ul>
<p><img alt="Alt Image Text" src="../../images/chap9_3_1.png" title="Body image" /></p>
<h3 id="wildcard-protected-tags"><strong>Wildcard protected tags</strong></h3>
<table>
<thead>
<tr>
<th>Wildcard Protected Tag</th>
<th>Matching Tags</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>v*</code></td>
<td><code>v1.0.0, version-9.1</code></td>
</tr>
<tr>
<td><code>*-deploy</code></td>
<td><code>march-deploy, 1.0-deploy</code></td>
</tr>
<tr>
<td><code>*gitlab*</code></td>
<td><code>gitlab, gitlab/v1</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td><code>v1.0.1rc2, accidental-tag</code></td>
</tr>
</tbody>
</table>
<p>Two different wildcards can potentially match the same tag. <strong>For example, <code>*-stable</code> and <code>production-*</code> would both match a <code>production-stable</code> tag</strong>.</p>
<p>In that case, if any of these protected tags have a setting like <strong>Allowed to create</strong>, <strong>then <code>production-stable</code> also inherit this setting</strong>.</p>
<p>If you select a protected tag’s name, GitLab displays a list of all matching tags:</p>
<p><img alt="Alt Image Text" src="../../images/chap9_3_2.png" title="Body image" /></p>
<h2 id="push-rules"><strong>Push rules</strong></h2>
<p>Push rules give you more control over what can and can’t be pushed to your repository. While GitLab offers protected branches, you may need more specific rules, such as:</p>
<ul>
<li><strong>Evaluating the contents of a commit</strong>.</li>
<li><strong>Confirming commit messages match expected formats</strong>.</li>
<li><strong>Enforcing branch name rules</strong>.</li>
<li><strong>Evaluating the details of files</strong>.</li>
<li><strong>Preventing Git tag removal</strong>.</li>
</ul>
<h3 id="enable-global-push-rules"><strong>Enable global push rules</strong></h3>
<p>You can create push rules for all new projects to inherit, but they can be overridden at the project level or the group level. All projects created after you configure global push rules inherit this configuration.</p>
<p>Prerequisite:</p>
<p><strong>You must be an administrator.</strong></p>
<h3 id="override-global-push-rules-per-project">Override global push rules per project</h3>
<p>The push rule of an <strong>individual project overrides the global push rule</strong>.</p>
<p>To override global push rules for a specific project, or to update the rules for an existing project to match new global push rules:</p>
<h3 id="verify-users">Verify users</h3>
<p>Use these rules to validate users who make commits.</p>
<ul>
<li><strong>Reject unverified users</strong>: Users must have a confirmed email address.</li>
<li><strong>Check whether the commit author is a GitLab user</strong>: The commit author and committer must have an email address that’s been verified by GitLab.</li>
<li><strong>Commit author’s email</strong>: Both the author’s and committer’s email addresses must match the regular expression. To allow any email address, leave empty.</li>
</ul>
<h3 id="validate-commit-messages"><strong>Validate commit messages</strong></h3>
<ul>
<li><strong>Require expression in commit messages</strong>: Messages must match the expression. To allow any commit message, leave empty. Uses multiline mode, which can be disabled by using (?-m).</li>
</ul>
<p>For example, if every commit should reference a Jira issue (like Refactored css. Fixes JIRA-123.), the regular expression would be JIRA-\d+.</p>
<ul>
<li><strong>Reject expression in commit messages</strong>: Commit messages must not match the expression. To allow any commit message, leave empty. Uses multiline mode, which can be disabled by using (?-m).</li>
</ul>
<h3 id="validate-branch-names"><strong>Validate branch names</strong></h3>
<p>To validate your branch names, enter a regular expression for <strong>Branch name</strong>. To allow any branch name, leave empty.</p>
<p>Your default branch is always allowed. Certain formats of branch names are restricted by default for security purposes.</p>
<p>Some validation examples:</p>
<ul>
<li>Branches must start with JIRA-.</li>
</ul>
<pre><code>`^JIRA-`

</code></pre>
<ul>
<li>Branches must end with -JIRA.</li>
</ul>
<pre><code>`-JIRA$`
</code></pre>
<ul>
<li>Branches must be between 4 and 15 characters long, accepting only lowercase letters, numbers and dashes.</li>
</ul>
<pre><code>`^[a-z0-9\\-]{4,15}$`
</code></pre>
<h3 id="prevent-unintended-consequences"><strong>Prevent unintended consequences</strong></h3>
<ul>
<li><strong>Reject unsigned commits</strong>: Commit must be signed through GPG</li>
<li><strong>Do not allow users to remove Git tags with git push</strong>: Users cannot use git push to remove Git tags. Users can still delete tags in the UI.</li>
</ul>
<h3 id="validate-files"><strong>Validate files</strong></h3>
<ul>
<li>Prevent pushing secret files:</li>
<li><strong>Prohibited file names</strong>: Files that do not exist in the repository must not match the regular expression</li>
<li><strong>Maximum file size</strong>: Added or updated files must not exceed this file size (in MB)</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021-9999 Jacob Xi
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>